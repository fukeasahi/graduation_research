## 聞きたいことの一行まとめ
- Adj. R-squaredやP値の値を良くしたいです。

## 起きている問題（起きている現象の詳細/エラーコード/スクリーンショット）
- 変数を2乗や3乗してもAdj. R-squaredが0.2以上にならないです。

## ソースコード（関連するソースコード/全ソースコード）
```
import pandas as pd
import statsmodels.formula.api as smf
import matplotlib.pyplot as plt

class Analysis:
  def __init__(self, data, target_variable, explanatory_variables):
    self.target_variable = data[target_variable] 
    self.explanatory_variables = data[explanatory_variables]
    self.data = data[explanatory_variables + [target_variable]]

  def describe(self):
    return self.data.describe()

  def corr(self):
    return self.data.corr(method='pearson')

  def show_scattergram(self):
    for explanatory_variable_name in self.explanatory_variables:
      self.__scatter(explanatory_variable_name, self.data[explanatory_variable_name])

  def multiple_regression(self):
    formula = f"{self.target_variable.name} ~ {' + '.join(self.explanatory_variables.columns)}"
    results = smf.ols(formula, self.data).fit()
    print(results.summary())

  def add(self, multiplier, times):
    self.explanatory_variables[multiplier + "_" + str(times)] = self.explanatory_variables[multiplier] ** times
    self.data[multiplier + "_" + str(times)]                  = self.explanatory_variables[multiplier] ** times

  def remove(self, name):
    self.explanatory_variables.remove(name)

  def include(self, name, count):
    if count == 2:
      self.add(name, 2)
    elif count == 3:
      self.add(name, 2)
      self.add(name, 3)

  def __scatter(self, explanatory_variable_name, explanatory_variable):
    plt.scatter(explanatory_variable, self.target_variable)
    plt.title(f"Scatterplot of {explanatory_variable_name} and {self.target_variable.name}")
    plt.xlabel(explanatory_variable_name)
    plt.ylabel(self.target_variable.name)
    plt.grid(True)
    plt.show()
    print("corr", self.target_variable.corr(explanatory_variable))

data = pd.read_excel("/content/data.xlsx", sheet_name="data").drop(['Unnamed: 0', 'date'], axis=1)
analysis = Analysis(data, "yen_kg", ["average_temperature", "total_precipitation", "sunlight_hours", "quantity"])

for a in [1, 2, 3]:
  for c in [1, 2, 3]:
    for e in [1, 2, 3]:
      for g in [1, 2, 3]:
        analysis.include("average_temperature", a)
        analysis.include("total_precipitation", c)
        analysis.include("sunlight_hours", e)
        analysis.include("quantity", g)
        analysis.multiple_regression()
        analysis = Analysis(data, "yen_kg", ["average_temperature", "total_precipitation", "sunlight_hours", "quantity"])
```

お手数をおかけしますが、ご教授よろしくお願いいたします。

